# 记账PWA应用产品需求文档(PRD)

## 1. 产品概述

### 1.1 产品定位
一款轻量级的个人记账PWA应用,支持iOS安装到主屏幕,提供完整的记账、预算管理、数据分析功能。

### 1.2 目标用户
- 需要随时记录日常开支的个人用户
- 希望了解消费习惯并进行预算管理的用户
- 偏好简洁、快速记账体验的移动端用户

### 1.3 核心价值
- 快速记账:3秒内完成一笔记录
- 数据可视化:直观的图表展示消费趋势
- 离线优先:无网络也能正常使用
- 隐私保护:数据存储在本地

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 快速记账
**优先级: P0**

- 支持收入/支出两种类型
- 预设分类:
  - 支出:餐饮、交通、购物、娱乐、医疗、住房、教育、其他
  - 收入:工资、兼职、投资、其他
- 金额输入(数字键盘)
- 备注说明(可选)
- 日期选择(默认当天)
- 支持拍照上传凭证(可选)
- 快速重复记账(基于历史记录)

#### 2.1.2 账单管理
**优先级: P0**

- 账单列表展示(按日期倒序)
- 按日/周/月分组显示
- 支持搜索和筛选:
  - 按分类筛选
  - 按收入/支出类型
  - 按日期范围
  - 按金额区间
  - 按备注关键词
- 账单详情查看
- 编辑和删除账单
- 批量删除功能

#### 2.1.3 统计分析
**优先级: P0**

- 时间维度统计:
  - 今日/本周/本月/本年
  - 自定义时间范围
- 收支汇总:
  - 总收入/总支出/结余
  - 同比/环比增长率
- 分类占比:
  - 饼图展示各分类支出占比
  - Top5消费分类
- 趋势分析:
  - 折线图展示每日/每周/每月趋势
  - 柱状图对比收支
- 年度报告(类似支付宝账单)

#### 2.1.4 预算管理
**优先级: P1**

- 设置月度总预算
- 按分类设置子预算
- 预算执行进度显示
- 预算超支提醒
- 预算完成度统计

#### 2.1.5 账户管理
**优先级: P1**

- 支持多账户:
  - 现金
  - 银行卡
  - 支付宝
  - 微信
  - 信用卡
  - 其他
- 账户余额管理
- 账户间转账记录
- 初始余额设置

#### 2.1.6 周期账单
**优先级: P1**

- 设置固定周期账单:
  - 房租、水电费、订阅服务等
- 周期选项:每日/每周/每月/每年
- 自动提醒功能
- 快速记账入口

#### 2.1.7 数据管理
**优先级: P0**

- 数据导出:
  - CSV格式
  - Excel格式
  - PDF报表
- 数据导入:
  - 支持CSV导入
  - 支持其他记账app数据迁移
- 数据备份:
  - 云端备份(可选)
  - 本地备份
- 数据恢复
- 清空所有数据(需二次确认)

#### 2.1.8 设置与个性化
**优先级: P2**

- 基础设置:
  - 默认账户选择
  - 记账提醒时间
  - 首页显示内容
  - 手势快捷操作
- 主题设置:
  - 浅色/深色模式
  - 跟随系统
- 分类管理:
  - 自定义分类
  - 分类图标选择
  - 分类排序
- 货币设置:
  - 币种选择
  - 符号显示
- 隐私设置:
  - 应用锁(密码/指纹)
  - 数据加密

### 2.2 PWA特性要求

#### 2.2.1 安装体验
- 支持"添加到主屏幕"
- 自定义应用图标和启动画面
- 独立窗口运行(无浏览器地址栏)

#### 2.2.2 离线功能
- Service Worker缓存策略
- 离线时可正常记账
- 网络恢复后自动同步

#### 2.2.3 性能优化
- 首屏加载时间 < 2秒
- 交互响应时间 < 100ms
- 使用懒加载优化图片和组件

#### 2.2.4 移动端适配
- 响应式设计,适配各种屏幕尺寸
- 触摸友好的交互设计
- 支持手势操作(滑动删除等)
- 虚拟键盘优化

## 3. 技术架构建议

### 3.1 前端技术栈
- **框架**: React + TypeScript
- **状态管理**: Redux Toolkit 或 Zustand
- **UI组件**: Tailwind CSS + shadcn/ui
- **图表库**: Recharts 或 Chart.js
- **PWA工具**: Workbox
- **本地存储**: IndexedDB (使用Dexie.js封装)
- **日期处理**: date-fns
- **图标**: Lucide React

### 3.2 数据存储方案
- 使用IndexedDB存储所有账单数据
- 使用LocalStorage存储用户设置和偏好
- 数据结构设计:

```typescript
// 账单记录
interface Transaction {
  id: string;
  type: 'income' | 'expense';
  amount: number;
  category: string;
  account: string;
  date: string;
  note?: string;
  image?: string;
  createdAt: string;
  updatedAt: string;
}

// 分类
interface Category {
  id: string;
  name: string;
  type: 'income' | 'expense';
  icon: string;
  color: string;
  order: number;
}

// 账户
interface Account {
  id: string;
  name: string;
  type: string;
  balance: number;
  initialBalance: number;
}

// 预算
interface Budget {
  id: string;
  categoryId: string;
  amount: number;
  period: 'monthly' | 'yearly';
  startDate: string;
}
```

### 3.3 PWA配置
- manifest.json配置示例:

```json
{
  "name": "简记账",
  "short_name": "简记账",
  "description": "简洁高效的个人记账应用",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#4F46E5",
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

## 4. 页面结构

### 4.1 页面导航
- Tab Bar底部导航(4个主要页面):
  1. 首页(统计概览)
  2. 账单列表
  3. 图表分析
  4. 我的(设置)

### 4.2 页面详细说明

#### 首页(统计概览)
- 本月收支汇总卡片
- 快速记账按钮(悬浮按钮)
- 今日账单列表(最多显示5条)
- 预算进度条
- 快捷功能入口

#### 账单页
- 搜索栏
- 筛选器(日期、分类、类型)
- 按日期分组的账单列表
- 下拉刷新
- 上拉加载更多

#### 图表页
- 时间选择器(日/周/月/年)
- 收支趋势图
- 分类占比图
- 分类详细列表
- 数据导出入口

#### 我的页
- 账户总览
- 账户管理入口
- 预算设置入口
- 周期账单入口
- 分类管理
- 数据管理
- 设置
- 关于

### 4.3 核心交互流程

#### 记账流程
1. 点击首页悬浮按钮或底部记账按钮
2. 弹出记账表单
3. 选择收入/支出类型
4. 输入金额(数字键盘)
5. 选择分类(宫格展示)
6. 选择账户(可选)
7. 选择日期(可选,默认今天)
8. 填写备注(可选)
9. 上传凭证(可选)
10. 点击完成保存

## 5. UI/UX设计要求

### 5.1 设计原则
- **简洁至上**: 减少不必要的视觉元素
- **一致性**: 统一的颜色、字体、间距系统
- **可访问性**: 足够的对比度,合适的字体大小
- **反馈及时**: 每个操作都有明确的视觉反馈

### 5.2 视觉规范
- **主色调**: 蓝色系(#4F46E5)
- **辅助色**: 绿色(收入)、红色(支出)
- **字体大小**:
  - 标题: 20-24px
  - 正文: 14-16px
  - 辅助文字: 12px
- **圆角**: 8-12px
- **间距**: 使用8px栅格系统

### 5.3 交互细节
- 金额输入支持千位分隔符
- 列表项支持左滑删除
- 长按账单显示更多操作
- 下拉刷新动画
- 骨架屏加载状态
- 空状态友好提示

## 6. 开发阶段建议

### Phase 1: MVP (最小可行产品)
- 快速记账功能
- 账单列表展示
- 基础统计(收支汇总)
- 本地数据存储
- PWA基础配置

### Phase 2: 核心功能完善
- 分类管理
- 账户管理
- 搜索和筛选
- 图表分析
- 数据导出

### Phase 3: 高级功能
- 预算管理
- 周期账单
- 数据备份/恢复
- 主题切换
- 应用锁

### Phase 4: 优化与完善
- 性能优化
- 用户体验优化
- 细节打磨
- 添加帮助文档

## 7. 测试要点

### 7.1 功能测试
- 记账流程完整性
- 数据增删改查
- 筛选和搜索准确性
- 统计计算正确性
- 导入导出功能

### 7.2 兼容性测试
- iOS Safari浏览器
- 不同iOS版本(iOS 14+)
- 不同屏幕尺寸(iPhone SE - iPhone Pro Max)
- 横竖屏切换

### 7.3 性能测试
- 大数据量下的流畅度(1000+条记录)
- 内存占用
- 首屏加载速度
- 离线功能可用性

### 7.4 用户体验测试
- 记账效率(目标3秒内完成)
- 操作直观性
- 错误提示友好性

## 8. 成功指标

- 用户记账完成时间 < 5秒
- 应用加载时间 < 2秒
- 数据计算准确率 = 100%
- 离线功能可用性 = 100%
- 用户操作流畅度(无卡顿)

## 9. 参考竞品

可以参考学习以下应用的优点:
- **随手记**: 完善的分类体系和账户管理
- **钱迹**: 简洁的UI和流畅的交互
- **鲨鱼记账**: 快速记账体验
- **Monefy**: 直观的饼图展示
- **Spendee**: 精美的数据可视化

## 10. 开发建议

### 给AI Agent的开发指引

1. **先搭建项目基础**: 创建React + TypeScript项目,配置PWA基础设施
2. **数据层优先**: 先实现IndexedDB的数据存储和读取逻辑
3. **自底向上开发**: 先开发基础组件(按钮、输入框、卡片等),再组合成页面
4. **功能迭代开发**: 按MVP -> 核心功能 -> 高级功能的顺序开发
5. **持续测试**: 每完成一个功能模块就进行测试
6. **性能优先**: 使用React.memo、useMemo等优化性能
7. **移动端优先**: 所有UI和交互都以移动端为主要考虑对象

### 关键技术难点提示
- IndexedDB的异步操作封装
- Service Worker的缓存策略
- 大列表的虚拟滚动优化
- 图表的性能优化(数据量大时)
- PWA在iOS上的兼容性处理

---

**文档版本**: v1.0  
**创建日期**: 2026-01-04  
**适用平台**: iOS PWA